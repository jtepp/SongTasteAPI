!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}({5:function(t,e,n){e.handler=function(t,e,r){console.log(t.body);try{const e=n(6),i=(e.Neuron,e.Layer,e.Network,e.Trainer),o=e.Architect,a=JSON.stringify(t.body).split("\\").join("").split(',"break":"break",').join(),s=a.slice(1,a.length-1),u=JSON.parse(s),c=new o.Perceptron(9,7,6,1);new i(c).train(u.Atrain);const l=c.activate(u.Crun);console.log(l),r(null,{statusCode:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},body:JSON.stringify(l[0])})}catch(t){console.log("failed"+t),r(null,{statusCode:206,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},body:JSON.stringify({error:"please make sure your input JSON follows this template",template:JSON.parse('{ "Atrain": [ { "input": "[Array]", "output": "[Array]" }, { "input": "[Array]", "output": "[Array]" }, { "input": "[Array]", "output": "[Array]" }, { "input": "[Array]", "output": "[Array]" }, { "input": "[Array]", "output": "[Array]" }, { "input": "[Array]", "output": "[Array]" }, { "input": "[Array]", "output": "[Array]" }, { "input": "[Array]", "output": "[Array]" }, { "input": "[Array]", "output": "[Array]" }, { "input": "[Array]", "output": "[Array]" } ], "break":"break", "Crun": "[Array]" }')})})}}},6:function(t,e,n){
/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2017 Juan Cazala - https://caza.la
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE
 * 
 * 
 * 
 * ********************************************************************************************
 *                                   SYNAPTIC (v1.1.4)
 * ********************************************************************************************
 * 
 * Synaptic is a javascript neural network library for node.js and the browser, its generalized
 * algorithm is architecture-free, so you can build and train basically any type of first order
 * or even second order neural network architectures.
 * 
 * http://en.wikipedia.org/wiki/Recurrent_neural_network#Second_Order_Recurrent_Neural_Network
 * 
 * The library includes a few built-in architectures like multilayer perceptrons, multilayer
 * long-short term memory networks (LSTM) or liquid state machines, and a trainer capable of
 * training any given network, and includes built-in training tasks/tests like solving an XOR,
 * passing a Distracted Sequence Recall test or an Embeded Reber Grammar test.
 * 
 * The algorithm implemented by this library has been taken from Derek D. Monner's paper:
 * 
 * 
 * A generalized LSTM-like training algorithm for second-order recurrent neural networks
 * http://www.overcomplete.net/papers/nn2012.pdf
 * 
 * There are references to the equations in that paper commented through the source code.
 * 
 */
var r;r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(6)),o=s(n(2)),a=s(n(1));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.size=0|e,this.list=[],this.connectedTo=[];e--;){var n=new o.default;this.list.push(n)}}return r(t,[{key:"activate",value:function(t){var e=[];if(void 0!==t){if(t.length!=this.size)throw new Error("INPUT size and LAYER size must be the same to activate!");for(var n in this.list){var r=this.list[n].activate(t[n]);e.push(r)}}else for(var n in this.list)r=this.list[n].activate(),e.push(r);return e}},{key:"propagate",value:function(t,e){if(void 0!==e){if(e.length!=this.size)throw new Error("TARGET size and LAYER size must be the same to propagate!");for(var n=this.list.length-1;n>=0;n--)this.list[n].propagate(t,e[n])}else for(n=this.list.length-1;n>=0;n--)this.list[n].propagate(t)}},{key:"project",value:function(e,n,r){if(e instanceof a.default&&(e=e.layers.input),!(e instanceof t))throw new Error("Invalid argument, you can only project connections to LAYERS and NETWORKS!");if(!this.connected(e))return new i.default(this,e,n,r)}},{key:"gate",value:function(e,n){if(n==t.gateType.INPUT){if(e.to.size!=this.size)throw new Error("GATER layer and CONNECTION.TO layer must be the same size in order to gate!");for(var r in e.to.list){var i=e.to.list[r],o=this.list[r];for(var a in i.connections.inputs)(u=i.connections.inputs[a]).ID in e.connections&&o.gate(u)}}else if(n==t.gateType.OUTPUT){if(e.from.size!=this.size)throw new Error("GATER layer and CONNECTION.FROM layer must be the same size in order to gate!");for(var r in e.from.list)for(var s in i=e.from.list[r],o=this.list[r],i.connections.projected)(u=i.connections.projected[s]).ID in e.connections&&o.gate(u)}else if(n==t.gateType.ONE_TO_ONE){if(e.size!=this.size)throw new Error("The number of GATER UNITS must be the same as the number of CONNECTIONS to gate!");for(var r in e.list){o=this.list[r];var u=e.list[r];o.gate(u)}}e.gatedfrom.push({layer:this,type:n})}},{key:"selfconnected",value:function(){for(var t in this.list)if(!this.list[t].selfconnected())return!1;return!0}},{key:"connected",value:function(e){var n=0;for(var r in this.list)for(var i in e.list){var o=this.list[r],a=e.list[i];u=o.connected(a),"projected"==u.type&&n++}if(n==this.size*e.size)return t.connectionType.ALL_TO_ALL;for(var s in n=0,this.list){o=this.list[s],a=e.list[s];var u=o.connected(a);"projected"==u.type&&n++}return n==this.size?t.connectionType.ONE_TO_ONE:void 0}},{key:"clear",value:function(){for(var t in this.list)this.list[t].clear()}},{key:"reset",value:function(){for(var t in this.list)this.list[t].reset()}},{key:"neurons",value:function(){return this.list}},{key:"add",value:function(t){t=t||new o.default,this.list.push(t),this.size++}},{key:"set",value:function(t){for(var e in t=t||{},this.list){var n=this.list[e];t.label&&(n.label=t.label+"_"+n.ID),t.squash&&(n.squash=t.squash),t.bias&&(n.bias=t.bias)}return this}}]),t}();u.connectionType={ALL_TO_ALL:"ALL TO ALL",ONE_TO_ONE:"ONE TO ONE",ALL_TO_ELSE:"ALL TO ELSE"},u.gateType={INPUT:"INPUT",OUTPUT:"OUTPUT",ONE_TO_ONE:"ONE TO ONE"},e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(2)),a=u(n(0)),s=u(n(3));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0!==e&&(this.layers={input:e.input||null,hidden:e.hidden||[],output:e.output||null},this.optimized=null)}return i(t,[{key:"activate",value:function(t){if(!1===this.optimized){this.layers.input.activate(t);for(var e=0;e<this.layers.hidden.length;e++)this.layers.hidden[e].activate();return this.layers.output.activate()}return null==this.optimized&&this.optimize(),this.optimized.activate(t)}},{key:"propagate",value:function(t,e){if(!1===this.optimized){this.layers.output.propagate(t,e);for(var n=this.layers.hidden.length-1;n>=0;n--)this.layers.hidden[n].propagate(t)}else null==this.optimized&&this.optimize(),this.optimized.propagate(t,e)}},{key:"project",value:function(e,n,r){if(this.optimized&&this.optimized.reset(),e instanceof t)return this.layers.output.project(e.layers.input,n,r);if(e instanceof a.default)return this.layers.output.project(e,n,r);throw new Error("Invalid argument, you can only project connections to LAYERS and NETWORKS!")}},{key:"gate",value:function(t,e){this.optimized&&this.optimized.reset(),this.layers.output.gate(t,e)}},{key:"clear",value:function(){this.restore();var t=this.layers.input,e=this.layers.output;t.clear();for(var n=0;n<this.layers.hidden.length;n++)this.layers.hidden[n].clear();e.clear(),this.optimized&&this.optimized.reset()}},{key:"reset",value:function(){this.restore();var t=this.layers.input,e=this.layers.output;t.reset();for(var n=0;n<this.layers.hidden.length;n++)this.layers.hidden[n].reset();e.reset(),this.optimized&&this.optimized.reset()}},{key:"optimize",value:function(){for(var t=this,e={},n=this.neurons(),r=0;r<n.length;r++){for(var i=n[r].neuron,o=n[r].layer;i.neuron;)i=i.neuron;e=i.optimize(e,o)}for(r=0;r<e.propagation_sentences.length;r++)e.propagation_sentences[r].reverse();e.propagation_sentences.reverse();var a="";for(var r in a+="var F = Float64Array ? new Float64Array("+e.memory+") : []; ",e.variables)a+="F["+e.variables[r].id+"] = "+(e.variables[r].value||0)+"; ";for(a+="var activate = function(input){\n",r=0;r<e.inputs.length;r++)a+="F["+e.inputs[r]+"] = input["+r+"]; ";for(r=0;r<e.activation_sentences.length;r++)if(e.activation_sentences[r].length>0)for(var s=0;s<e.activation_sentences[r].length;s++)a+=e.activation_sentences[r][s].join(" "),a+=e.trace_sentences[r][s].join(" ");for(a+=" var output = []; ",r=0;r<e.outputs.length;r++)a+="output["+r+"] = F["+e.outputs[r]+"]; ";for(a+="return output; }; ",a+="var propagate = function(rate, target){\n",a+="F["+e.variables.rate.id+"] = rate; ",r=0;r<e.targets.length;r++)a+="F["+e.targets[r]+"] = target["+r+"]; ";for(r=0;r<e.propagation_sentences.length;r++)for(s=0;s<e.propagation_sentences[r].length;s++)a+=e.propagation_sentences[r][s].join(" ")+" ";a+=" };\n",a+="var ownership = function(memoryBuffer){\nF = memoryBuffer;\nthis.memory = F;\n};\n",a=(a+="return {\nmemory: F,\nactivate: activate,\npropagate: propagate,\nownership: ownership\n};").split(";").join(";\n");var u=new Function(a)();u.data={variables:e.variables,activate:e.activation_sentences,propagate:e.propagation_sentences,trace:e.trace_sentences,inputs:e.inputs,outputs:e.outputs,check_activation:this.activate,check_propagation:this.propagate},u.reset=function(){t.optimized&&(t.optimized=null,t.activate=u.data.check_activation,t.propagate=u.data.check_propagation)},this.optimized=u,this.activate=u.activate,this.propagate=u.propagate}},{key:"restore",value:function(){if(this.optimized)for(var t=this.optimized,e=function(){var e=Array.prototype.slice.call(arguments),n=e.shift(),r=e.pop(),i=r+"_";for(var o in e)i+=e[o]+"_";i+=n.ID;var a=t.memory,s=t.data.variables;return i in s?a[s[i].id]:0},n=this.neurons(),r=0;r<n.length;r++){for(var i=n[r].neuron;i.neuron;)i=i.neuron;for(var o in i.state=e(i,"state"),i.old=e(i,"old"),i.activation=e(i,"activation"),i.bias=e(i,"bias"),i.trace.elegibility)i.trace.elegibility[o]=e(i,"trace","elegibility",o);for(var a in i.trace.extended)for(var o in i.trace.extended[a])i.trace.extended[a][o]=e(i,"trace","extended",a,o);for(var s in i.connections.projected){var u=i.connections.projected[s];u.weight=e(u,"weight"),u.gain=e(u,"gain")}}}},{key:"neurons",value:function(){for(var t=[],e=this.layers.input.neurons(),n=this.layers.output.neurons(),r=0;r<e.length;r++)t.push({neuron:e[r],layer:"input"});for(r=0;r<this.layers.hidden.length;r++)for(var i=this.layers.hidden[r].neurons(),o=0;o<i.length;o++)t.push({neuron:i[o],layer:r});for(r=0;r<n.length;r++)t.push({neuron:n[r],layer:"output"});return t}},{key:"inputs",value:function(){return this.layers.input.size}},{key:"outputs",value:function(){return this.layers.output.size}},{key:"set",value:function(t){this.layers={input:t.input||null,hidden:t.hidden||[],output:t.output||null},this.optimized&&this.optimized.reset()}},{key:"setOptimize",value:function(t){this.restore(),this.optimized&&this.optimized.reset(),this.optimized=!!t&&null}},{key:"toJSON",value:function(t){this.restore();for(var e=this.neurons(),n=[],r=[],i={},a=0;a<e.length;a++){for(var s=e[a].neuron;s.neuron;)s=s.neuron;i[s.ID]=a;var u={trace:{elegibility:{},extended:{}},state:s.state,old:s.old,activation:s.activation,bias:s.bias,layer:e[a].layer};u.squash=s.squash==o.default.squash.LOGISTIC?"LOGISTIC":s.squash==o.default.squash.TANH?"TANH":s.squash==o.default.squash.IDENTITY?"IDENTITY":s.squash==o.default.squash.HLIM?"HLIM":s.squash==o.default.squash.RELU?"RELU":null,n.push(u)}for(a=0;a<e.length;a++){for(s=e[a].neuron;s.neuron;)s=s.neuron;for(var c in s.connections.projected){var l=s.connections.projected[c];r.push({from:i[l.from.ID],to:i[l.to.ID],weight:l.weight,gater:l.gater?i[l.gater.ID]:null})}s.selfconnected()&&r.push({from:i[s.ID],to:i[s.ID],weight:s.selfconnection.weight,gater:s.selfconnection.gater?i[s.selfconnection.gater.ID]:null})}return{neurons:n,connections:r}}},{key:"toDot",value:function(t){void 0===t||r(t)||(t=!1);for(var e="digraph nn {\n    rankdir = BT\n",n=[this.layers.input].concat(this.layers.hidden,this.layers.output),i=0;i<n.length;i++)for(var o=0;o<n[i].connectedTo.length;o++){var a=n[i].connectedTo[o],s=a.to,u=a.size,c=n.indexOf(n[i]),l=n.indexOf(s);if(t){if(a.gatedfrom.length){var h="fake"+c+"_"+l;e+="    "+h+' [label = "", shape = point, width = 0.01, height = 0.01]\n',e+="    "+c+" -> "+h+" [label = "+u+", arrowhead = none]\n",e+="    "+h+" -> "+l+"\n"}else e+="    "+c+" -> "+l+" [label = "+u+"]\n";for(var f in a.gatedfrom){var p=a.gatedfrom[f].layer;e+="    "+n.indexOf(p)+" -> "+h+" [color = blue]\n"}}else for(var f in e+="    "+c+" -> "+l+" [label = "+u+"]\n",a.gatedfrom)p=a.gatedfrom[f].layer,e+="    "+n.indexOf(p)+" -> "+l+" [color = blue]\n"}return{code:e+="}\n",link:"https://chart.googleapis.com/chart?chl="+escape(e.replace("/ /g","+"))+"&cht=gv"}}},{key:"standalone",value:function(){this.optimized||this.optimize();for(var t=this.optimized.data,e="function (input) {\n",n=0;n<t.inputs.length;n++)e+="F["+t.inputs[n]+"] = input["+n+"];\n";for(n=0;n<t.activate.length;n++)for(var r=0;r<t.activate[n].length;r++)e+=t.activate[n][r].join("")+"\n";for(e+="var output = [];\n",n=0;n<t.outputs.length;n++)e+="output["+n+"] = F["+t.outputs[n]+"];\n";var i=(e+="return output;\n}").match(/F\[(\d+)\]/g),o=0,a={};for(n=0;n<i.length;n++){var s=i[n].match(/\d+/)[0];s in a||(a[s]=o++)}var u="F = {\n";for(var n in a)u+=a[n]+": "+this.optimized.memory[n]+",\n";return u=u.substring(0,u.length-2)+"\n};\n",u="var run = "+e.replace(/F\[(\d+)]/g,(function(t){return"F["+a[t.match(/\d+/)[0]]+"]"})).replace("{\n","{\n"+u)+";\n",u+="return run",new Function(u)()}},{key:"worker",value:function(e,n,r){var i={};r&&(i=r),i.rate=i.rate||.2,i.iterations=i.iterations||1e5,i.error=i.error||.005,i.cost=i.cost||null,i.crossValidate=i.crossValidate||null;var o="// REPLACED BY WORKER\nvar cost = "+(r&&r.cost||this.cost||s.default.cost.MSE)+";\n",a=t.getWorkerSharedFunctions();a=(a=(a=(a=a.replace(/var cost = options && options\.cost \|\| this\.cost \|\| Trainer\.cost\.MSE;/g,o)).replace("return results;",'postMessage({action: "done", message: results, memoryBuffer: F}, [F.buffer]);')).replace("console.log('iterations', iterations, 'error', error, 'rate', currentRate)","postMessage({action: 'log', message: {\niterations: iterations,\nerror: error,\nrate: currentRate\n}\n})")).replace("abort = this.schedule.do({ error: error, iterations: iterations, rate: currentRate })","postMessage({action: 'schedule', message: {\niterations: iterations,\nerror: error,\nrate: currentRate\n}\n})"),this.optimized||this.optimize();var u="var inputs = "+this.optimized.data.inputs.length+";\n";u+="var outputs = "+this.optimized.data.outputs.length+";\n",u+="var F =  new Float64Array(["+this.optimized.memory.toString()+"]);\n",u+="var activate = "+this.optimized.activate.toString()+";\n",u+="var propagate = "+this.optimized.propagate.toString()+";\n",u+="onmessage = function(e) {\nif (e.data.action == 'startTraining') {\ntrain("+JSON.stringify(n)+","+JSON.stringify(i)+");\n}\n}";var c=new Blob([a+"\n"+u]),l=window.URL.createObjectURL(c);return new Worker(l)}},{key:"clone",value:function(){return t.fromJSON(this.toJSON())}}],[{key:"getWorkerSharedFunctions",value:function(){if(void 0!==t._SHARED_WORKER_FUNCTIONS)return t._SHARED_WORKER_FUNCTIONS;var e=s.default.prototype.train.toString();e=(e=(e=(e=e.replace(/this._trainSet/g,"_trainSet")).replace(/this.test/g,"test")).replace(/this.crossValidate/g,"crossValidate")).replace("crossValidate = true","// REMOVED BY WORKER");var n=s.default.prototype._trainSet.toString().replace(/this.network./g,""),r=s.default.prototype.test.toString().replace(/this.network./g,"");return t._SHARED_WORKER_FUNCTIONS=e+"\n"+n+"\n"+r}},{key:"fromJSON",value:function(e){for(var n=[],r={input:new a.default,hidden:[],output:new a.default},i=0;i<e.neurons.length;i++){var s=e.neurons[i],u=new o.default;u.trace.elegibility={},u.trace.extended={},u.state=s.state,u.old=s.old,u.activation=s.activation,u.bias=s.bias,u.squash=s.squash in o.default.squash?o.default.squash[s.squash]:o.default.squash.LOGISTIC,n.push(u),"input"==s.layer?r.input.add(u):"output"==s.layer?r.output.add(u):(void 0===r.hidden[s.layer]&&(r.hidden[s.layer]=new a.default),r.hidden[s.layer].add(u))}for(i=0;i<e.connections.length;i++){var c=n[(s=e.connections[i]).from],l=n[s.to],h=s.weight,f=n[s.gater],p=c.project(l,h);f&&f.gate(p)}return new t(r)}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(5),a=(r=o)&&r.__esModule?r:{default:r},s=0,u={LOGISTIC:function(t,e){var n=1/(1+Math.exp(-t));return e?n*(1-n):n},TANH:function(t,e){return e?1-Math.pow(Math.tanh(t),2):Math.tanh(t)},IDENTITY:function(t,e){return e?1:t},HLIM:function(t,e){return e||t>0?1:0},RELU:function(t,e){return e?t>0?1:0:t>0?t:0}},c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ID=t.uid(),this.connections={inputs:{},projected:{},gated:{}},this.error={responsibility:0,projected:0,gated:0},this.trace={elegibility:{},extended:{},influences:{}},this.state=0,this.old=0,this.activation=0,this.selfconnection=new a.default(this,this,0),this.squash=t.squash.LOGISTIC,this.neighboors={},this.bias=.2*Math.random()-.1}return i(t,[{key:"activate",value:function(t){if(void 0!==t)return this.activation=t,this.derivative=0,this.bias=0,this.activation;for(var e in this.old=this.state,this.state=this.selfconnection.gain*this.selfconnection.weight*this.state+this.bias,this.connections.inputs)t=this.connections.inputs[e],this.state+=t.from.activation*t.weight*t.gain;this.activation=this.squash(this.state),this.derivative=this.squash(this.state,!0);var n=[];for(var r in this.trace.extended){var i=(a=this.neighboors[r]).selfconnection.gater==this?a.old:0;for(var o in this.trace.influences[a.ID])i+=this.trace.influences[a.ID][o].weight*this.trace.influences[a.ID][o].from.activation;n[a.ID]=i}for(var e in this.connections.inputs)for(var r in t=this.connections.inputs[e],this.trace.elegibility[t.ID]=this.selfconnection.gain*this.selfconnection.weight*this.trace.elegibility[t.ID]+t.gain*t.from.activation,this.trace.extended){var a,s=this.trace.extended[r];i=n[(a=this.neighboors[r]).ID],s[t.ID]=a.selfconnection.gain*a.selfconnection.weight*s[t.ID]+this.derivative*this.trace.elegibility[t.ID]*i}for(var u in this.connections.gated)this.connections.gated[u].gain=this.activation;return this.activation}},{key:"propagate",value:function(t,e){var n=0;if(void 0!==e)this.error.responsibility=this.error.projected=e-this.activation;else{for(var r in this.connections.projected){var i=this.connections.projected[r];n+=(u=i.to).error.responsibility*i.gain*i.weight}for(var r in this.error.projected=this.derivative*n,n=0,this.trace.extended){var o=(u=this.neighboors[r]).selfconnection.gater==this?u.old:0;for(var a in this.trace.influences[r])o+=this.trace.influences[r][a].weight*this.trace.influences[u.ID][a].from.activation;n+=u.error.responsibility*o}this.error.gated=this.derivative*n,this.error.responsibility=this.error.projected+this.error.gated}for(var r in t=t||.1,this.connections.inputs){a=this.connections.inputs[r];var s=this.error.projected*this.trace.elegibility[a.ID];for(var r in this.trace.extended){var u;s+=(u=this.neighboors[r]).error.responsibility*this.trace.extended[u.ID][a.ID]}a.weight+=t*s}this.bias+=t*this.error.responsibility}},{key:"project",value:function(t,e){if(t==this)return this.selfconnection.weight=1,this.selfconnection;var n=this.connected(t);if(n&&"projected"==n.type)return void 0!==e&&(n.connection.weight=e),n.connection;var r=new a.default(this,t,e);for(var i in this.connections.projected[r.ID]=r,this.neighboors[t.ID]=t,t.connections.inputs[r.ID]=r,t.trace.elegibility[r.ID]=0,t.trace.extended)t.trace.extended[i][r.ID]=0;return r}},{key:"gate",value:function(t){this.connections.gated[t.ID]=t;var e=t.to;if(!(e.ID in this.trace.extended)){this.neighboors[e.ID]=e;var n=this.trace.extended[e.ID]={};for(var r in this.connections.inputs)n[this.connections.inputs[r].ID]=0}e.ID in this.trace.influences?this.trace.influences[e.ID].push(t):this.trace.influences[e.ID]=[t],t.gater=this}},{key:"selfconnected",value:function(){return 0!==this.selfconnection.weight}},{key:"connected",value:function(t){var e={type:null,connection:!1};if(this==t)return!!this.selfconnected()&&(e.type="selfconnection",e.connection=this.selfconnection,e);for(var n in this.connections)for(var r in this.connections[n]){if((r=this.connections[n][r]).to==t)return e.type=n,e.connection=r,e;if(r.from==t)return e.type=n,e.connection=r,e}return!1}},{key:"clear",value:function(){for(var t in this.trace.elegibility)this.trace.elegibility[t]=0;for(var t in this.trace.extended)for(var e in this.trace.extended[t])this.trace.extended[t][e]=0;this.error.responsibility=this.error.projected=this.error.gated=0}},{key:"reset",value:function(){for(var t in this.clear(),this.connections)for(var e in this.connections[t])this.connections[t][e].weight=.2*Math.random()-.1;this.bias=.2*Math.random()-.1,this.old=this.state=this.activation=0}},{key:"optimize",value:function(e,n){var r=[],i=[],o=[],a=(e=e||{}).memory||0,s=e.neurons||1,u=e.inputs||[],c=e.targets||[],l=e.outputs||[],h=e.variables||{},f=e.activation_sentences||[],p=e.trace_sentences||[],d=e.propagation_sentences||[],v=e.layers||{__count:0,__neuron:0},y=function(t){n in v&&t[v.__count]||(v.__count=t.push([])-1,v[n]=v.__count)};y(f),y(p),y(d);var g=v.__count,b=function(){var t=Array.prototype.slice.call(arguments);if(1==t.length){if("target"==t[0]){var e="target_"+c.length;c.push(a)}else e=t[0];return e in h?h[e]:h[e]={value:0,id:a++}}var n=t.length>2;if(n)var r=t.pop();var i=t.shift(),o=t.pop();n||(r=i[o]),e=o+"_";for(var s=0;s<t.length;s++)e+=t[s]+"_";return(e+=i.ID)in h?h[e]:h[e]={value:r,id:a++}},m=function(){for(var t=Array.prototype.slice.call(arguments),e=t.pop(),n="",r=0;r<t.length;r++)"string"==typeof t[r]?n+=t[r]:n+="F["+t[r].id+"]";e.push(n+";")},w=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},_=w(this.connections.projected),O=w(this.connections.gated),T="input"==n||w(this.connections.inputs),j="output"==n||_&&O,I=b("rate"),k=b(this,"activation");if(T)u.push(k.id);else{f[g].push(r),p[g].push(i),d[g].push(o);var E=b(this,"old"),D=b(this,"state"),A=b(this,"bias");if(this.selfconnection.gater)var S=b(this.selfconnection,"gain");if(this.selfconnected())var M=b(this.selfconnection,"weight");for(var z in m(E," = ",D,r),this.selfconnected()?this.selfconnection.gater?m(D," = ",S," * ",M," * ",D," + ",A,r):m(D," = ",M," * ",D," + ",A,r):m(D," = ",A,r),this.connections.inputs){var P=b(($=this.connections.inputs[z]).from,"activation"),N=b($,"weight");if($.gater)var L=b($,"gain");this.connections.inputs[z].gater?m(D," += ",P," * ",N," * ",L,r):m(D," += ",P," * ",N,r)}var x=b(this,"derivative");switch(this.squash){case t.squash.LOGISTIC:m(k," = (1 / (1 + Math.exp(-",D,")))",r),m(x," = ",k," * (1 - ",k,")",r);break;case t.squash.TANH:var R=b("aux"),C=b("aux_2");m(R," = Math.exp(",D,")",r),m(C," = 1 / ",R,r),m(k," = (",R," - ",C,") / (",R," + ",C,")",r),m(x," = 1 - (",k," * ",k,")",r);break;case t.squash.IDENTITY:m(k," = ",D,r),m(x," = 1",r);break;case t.squash.HLIM:m(k," = +(",D," > 0)",r),m(x," = 1",r);break;case t.squash.RELU:m(k," = ",D," > 0 ? ",D," : 0",r),m(x," = ",D," > 0 ? 1 : 0",r)}for(var q in this.trace.extended){var F=b("influences["+(et=this.neighboors[q]).ID+"]"),H=b(et,"old"),U=!1;for(var V in et.selfconnection.gater==this&&(m(F," = ",H,i),U=!0),this.trace.influences[et.ID]){var G=b(this.trace.influences[et.ID][V],"weight"),Y=b(this.trace.influences[et.ID][V].from,"activation");U?m(F," += ",G," * ",Y,i):(m(F," = ",G," * ",Y,i),U=!0)}}for(var z in this.connections.inputs){($=this.connections.inputs[z]).gater&&(L=b($,"gain")),P=b($.from,"activation");var B=b(this,"trace","elegibility",$.ID,this.trace.elegibility[$.ID]);for(var q in this.selfconnected()?this.selfconnection.gater?$.gater?m(B," = ",S," * ",M," * ",B," + ",L," * ",P,i):m(B," = ",S," * ",M," * ",B," + ",P,i):$.gater?m(B," = ",M," * ",B," + ",L," * ",P,i):m(B," = ",M," * ",B," + ",P,i):$.gater?m(B," = ",L," * ",P,i):m(B," = ",P,i),this.trace.extended){F=b("influences["+(et=this.neighboors[q]).ID+"]"),B=b(this,"trace","elegibility",$.ID,this.trace.elegibility[$.ID]);var J=b(this,"trace","extended",et.ID,$.ID,this.trace.extended[et.ID][$.ID]);if(et.selfconnected())var W=b(et.selfconnection,"weight");if(et.selfconnection.gater)var K=b(et.selfconnection,"gain");et.selfconnected()?et.selfconnection.gater?m(J," = ",K," * ",W," * ",J," + ",x," * ",B," * ",F,i):m(J," = ",W," * ",J," + ",x," * ",B," * ",F,i):m(J," = ",x," * ",B," * ",F,i)}}for(var X in this.connections.gated)m(b(this.connections.gated[X],"gain")," = ",k,r)}if(!T){var Q=b(this,"error","responsibility",this.error.responsibility);if(j){var Z=b("target");for(var q in m(Q," = ",Z," - ",k,o),this.connections.inputs)B=b(this,"trace","elegibility",($=this.connections.inputs[q]).ID,this.trace.elegibility[$.ID]),m(N=b($,"weight")," += ",I," * (",Q," * ",B,")",o);l.push(k.id)}else if(_||O){if(O){for(var q in m(Q," = 0",o),this.connections.projected)et=(X=this.connections.projected[q]).to,nt=b(X,"weight"),rt=b(et,"error","responsibility",et.error.responsibility),X.gater?m(Q," += ",rt," * ",b(X,"gain")," * ",nt,o):m(Q," += ",rt," * ",nt,o);for(var q in m(Q," *= ",x,o),this.connections.inputs)B=b(this,"trace","elegibility",($=this.connections.inputs[q]).ID,this.trace.elegibility[$.ID]),m(N=b($,"weight")," += ",I," * (",Q," * ",B,")",o)}else if(_){for(var q in m(Q," = 0",o),this.trace.extended){for(var $ in et=this.neighboors[q],F=b("aux"),H=b(et,"old"),et.selfconnection.gater==this?m(F," = ",H,o):m(F," = 0",o),this.trace.influences[et.ID])m(F," += ",nt=b(X=this.trace.influences[et.ID][$],"weight")," * ",b(X.from,"activation"),o);m(Q," += ",rt=b(et,"error","responsibility",et.error.responsibility)," * ",F,o)}for(var q in m(Q," *= ",x,o),this.connections.inputs){for(var q in $=this.connections.inputs[q],at=b("aux"),m(at," = 0",o),this.trace.extended)m(at," += ",rt=b(et=this.neighboors[q],"error","responsibility",et.error.responsibility)," * ",J=b(this,"trace","extended",et.ID,$.ID,this.trace.extended[et.ID][$.ID]),o);m(N=b($,"weight")," += ",I," * ",at,o)}}}else{var tt=b("aux");for(var q in this.connections.projected){var et=(X=this.connections.projected[q]).to,nt=b(X,"weight"),rt=b(et,"error","responsibility",et.error.responsibility);X.gater?m(tt," += ",rt," * ",b(X,"gain")," * ",nt,o):m(tt," += ",rt," * ",nt,o)}var it=b(this,"error","projected",this.error.projected);for(var q in m(it," = ",x," * ",tt,o),m(tt," = 0",o),this.trace.extended){var et=this.neighboors[q],F=b("aux_2"),H=b(et,"old");for(var $ in et.selfconnection.gater==this?m(F," = ",H,o):m(F," = 0",o),this.trace.influences[et.ID])m(F," += ",nt=b(X=this.trace.influences[et.ID][$],"weight")," * ",b(X.from,"activation"),o);m(tt," += ",rt=b(et,"error","responsibility",et.error.responsibility)," * ",F,o)}var ot=b(this,"error","gated",this.error.gated);for(var q in m(ot," = ",x," * ",tt,o),m(Q," = ",it," + ",ot,o),this.connections.inputs){var $=this.connections.inputs[q],at=b("aux"),B=b(this,"trace","elegibility",$.ID,this.trace.elegibility[$.ID]);for(var q in m(at," = ",it," * ",B,o),this.trace.extended)m(at," += ",rt=b(et=this.neighboors[q],"error","responsibility",et.error.responsibility)," * ",J=b(this,"trace","extended",et.ID,$.ID,this.trace.extended[et.ID][$.ID]),o);m(N=b($,"weight")," += ",I," * ",at,o)}}m(A," += ",I," * ",Q,o)}return{memory:a,neurons:s+1,inputs:u,outputs:l,targets:c,variables:h,activation_sentences:f,trace_sentences:p,propagation_sentences:d,layers:v}}}],[{key:"uid",value:function(){return s++}},{key:"quantity",value:function(){return{neurons:s,connections:o.connections}}}]),t}();c.squash=u,e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t){for(var e,n,r=t.length;r;e=Math.floor(Math.random()*r),n=t[--r],t[r]=t[e],t[e]=n);return t}var o={CROSS_ENTROPY:function(t,e){var n=0;for(var r in e)n-=t[r]*Math.log(e[r]+1e-15)+(1-t[r])*Math.log(1+1e-15-e[r]);return n},MSE:function(t,e){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(t[r]-e[r],2);return n/e.length},BINARY:function(t,e){for(var n=0,r=0;r<e.length;r++)n+=Math.round(2*t[r])!=Math.round(2*e[r]);return n}},a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=n||{},this.network=e,this.rate=n.rate||.2,this.iterations=n.iterations||1e5,this.error=n.error||.005,this.cost=n.cost||null,this.crossValidate=n.crossValidate||null}return r(t,[{key:"train",value:function(e,n){var r,o,a,s=1,u=p=0,c=!1,l=n&&n.cost||this.cost||t.cost.MSE,h=!1,f=Date.now();if(n&&(n.iterations&&(this.iterations=n.iterations),n.error&&(this.error=n.error),n.rate&&(this.rate=n.rate),n.cost&&(this.cost=n.cost),n.schedule&&(this.schedule=n.schedule),n.customLog&&(console.log("Deprecated: use schedule instead of customLog"),this.schedule=n.customLog),(this.crossValidate||n.crossValidate)&&(this.crossValidate||(this.crossValidate={}),h=!0,n.crossValidate.testSize&&(this.crossValidate.testSize=n.crossValidate.testSize),n.crossValidate.testError&&(this.crossValidate.testError=n.crossValidate.testError))),r=this.rate,Array.isArray(this.rate))var p=Math.floor(this.iterations/this.rate.length);if(h){var d=Math.ceil((1-this.crossValidate.testSize)*e.length);a=e.slice(0,d),o=e.slice(d)}for(var v=0;!c&&u<this.iterations&&s>this.error&&!(h&&s<=this.crossValidate.testError);){var y=e.length;if(s=0,u++,p>0){var g=Math.floor(u/p);r=this.rate[g]||r}"function"==typeof this.rate&&(r=this.rate(u,v)),h?(this._trainSet(a,r,l),s+=this.test(o).error,y=1):(s+=this._trainSet(e,r,l),y=e.length),v=s/=y,n&&(this.schedule&&this.schedule.every&&u%this.schedule.every==0?c=this.schedule.do({error:s,iterations:u,rate:r}):n.log&&u%n.log==0&&console.log("iterations",u,"error",s,"rate",r),n.shuffle&&i(e))}return{error:s,iterations:u,time:Date.now()-f}}},{key:"trainAsync",value:function(t,e){var n=this.workerTrain.bind(this);return new Promise((function(r,i){try{n(t,r,e,!0)}catch(t){i(t)}}))}},{key:"_trainSet",value:function(t,e,n){for(var r=0,i=0;i<t.length;i++){var o=t[i].input,a=t[i].output,s=this.network.activate(o);this.network.propagate(e,a),r+=n(a,s)}return r}},{key:"test",value:function(e,n){for(var r,i=0,o=n&&n.cost||this.cost||t.cost.MSE,a=Date.now(),s=0;s<e.length;s++)r=e[s].input,i+=o(e[s].output,this.network.activate(r));return{error:i/=e.length,time:Date.now()-a}}},{key:"workerTrain",value:function(t,e,n,r){r||console.warn("Deprecated: do not use `workerTrain`, use `trainAsync` instead.");var i=this;this.network.optimized||this.network.optimize();var o=this.network.worker(this.network.optimized.memory,t,n);o.onmessage=function(t){switch(t.data.action){case"done":var r=t.data.message.iterations,a=t.data.message.error,s=t.data.message.time;i.network.optimized.ownership(t.data.memoryBuffer),e({error:a,iterations:r,time:s}),o.terminate();break;case"log":console.log(t.data.message);case"schedule":n&&n.schedule&&"function"==typeof n.schedule.do&&(0,n.schedule.do)(t.data.message)}},o.postMessage({action:"startTraining"})}},{key:"XOR",value:function(e){if(2!=this.network.inputs()||1!=this.network.outputs())throw new Error("Incompatible network (2 inputs, 1 output)");var n={iterations:1e5,log:!1,shuffle:!0,cost:t.cost.MSE};if(e)for(var r in e)n[r]=e[r];return this.train([{input:[0,0],output:[0]},{input:[1,0],output:[1]},{input:[0,1],output:[1]},{input:[1,1],output:[0]}],n)}},{key:"DSR",value:function(e){var n,r,i,o,a,s=(e=e||{}).targets||[2,4,7,8],u=e.distractors||[3,5,6,9],c=e.prompts||[0,1],l=e.length||24,h=e.success||.95,f=e.iterations||1e5,p=e.rate||.1,d=e.log||0,v=e.schedule||{},y=e.cost||this.cost||t.cost.CROSS_ENTROPY;n=r=i=o=a=0;for(var g=1,b=s.length+u.length+c.length,m=function t(e,n){var r=Math.random()*e|0,i=!1;for(var o in n)r==n[o]&&(i=!0);return i?t(e,n):r},w=function(t,e){for(var n in t)if(Math.round(t[n])!=e[n])return!1;return!0},_=Date.now();n<f&&(a<h||n%1e3!=0);){var O=[],T=l-c.length;for(i=0;i<T;i++){var j=Math.random()*u.length|0;O.push(u[j])}var I,k=[],E=[];for(i=0;i<c.length;i++)k.push(Math.random()*s.length|0),E.push(m(T,E));for(E=E.sort(),i=0;i<c.length;i++)O[E[i]]=s[k[i]],O.push(c[i]);var D=I=0;for(g=0,i=0;i<l;i++){var A=[];for(o=0;o<b;o++)A[o]=0;A[O[i]]=1;var S=[];for(o=0;o<s.length;o++)S[o]=0;i>=T&&(S[k[i-T]]=1);var M=this.network.activate(A);w(M,S)?i<T?I++:D++:this.network.propagate(p,S),g+=y(S,M),I+D==l&&r++}n%1e3==0&&(r=0);var z=++n%1e3;a=r/(z=0==z?1e3:z),g/=l,d&&n%d==0&&console.log("iterations:",n," success:",a," correct:",r," time:",Date.now()-_," error:",g),v.do&&v.every&&n%v.every==0&&v.do({iterations:n,success:a,error:g,time:Date.now()-_,correct:r})}return{iterations:n,success:a,error:g,time:Date.now()-_}}},{key:"ERG",value:function(e){var n=(e=e||{}).iterations||15e4,r=e.error||.05,i=e.rate||.1,o=e.log||500,a=e.cost||this.cost||t.cost.CROSS_ENTROPY,s=function(){this.paths=[]};s.prototype={connect:function(t,e){return this.paths.push({node:t,value:e}),this},any:function(){if(0==this.paths.length)return!1;var t=Math.random()*this.paths.length|0;return this.paths[t]},test:function(t){for(var e in this.paths)if(this.paths[e].value==t)return this.paths[e];return!1}};for(var u=function(){var t=new s,e=(new s).connect(t,"E"),n=(new s).connect(e,"S"),r=(new s).connect(e,"V").connect(n,"P"),i=(new s).connect(n,"X");i.connect(i,"S");var o=(new s).connect(r,"V");o.connect(o,"T"),n.connect(o,"X");var a=(new s).connect(i,"T").connect(o,"P");return{input:(new s).connect(a,"B"),output:t}},c=function(){var t=u(),e=u(),n=new s,r=(new s).connect(n,"E");t.output.connect(r,"T"),e.output.connect(r,"P");var i=(new s).connect(t.input,"P").connect(e.input,"T");return{input:(new s).connect(i,"B"),output:n}},l=function(){for(var t=c().input.any(),e="";t;)e+=t.value,t=t.node.any();return e},h=function(t,e){var n=0,r=-1,i=0,o=-1;for(var a in t)t[a]>n&&(n=t[a],r=a),e[a]>i&&(i=e[a],o=a);return r!=o},f=0,p=1,d={B:0,P:1,T:2,X:3,S:4,E:5},v=Date.now();f<n&&p>r;){var y=0;p=0;for(var g=l(),b=g.charAt(y),m=g.charAt(y+1);y<g.length-1;){for(var w=[],_=[],O=0;O<6;O++)w[O]=0,_[O]=0;w[d[b]]=1,_[d[m]]=1;var T=this.network.activate(w);h(T,_)&&this.network.propagate(i,_),b=g.charAt(++y),m=g.charAt(y+1),p+=a(_,T)}p/=g.length,++f%o==0&&console.log("iterations:",f," time:",Date.now()-v," error:",p)}return{iterations:f,error:p,time:Date.now()-v,test:function(t){for(var e=c().input,n=0,r=t.charAt(n);n<t.length;){var i=e.test(r);if(!i)return!1;e=i.node,r=t.charAt(++n)}return!0},generate:l}}},{key:"timingTask",value:function(e){if(2!=this.network.inputs()||1!=this.network.outputs())throw new Error("Invalid Network: must have 2 inputs and one output");void 0===e&&(e={});var n=e.iterations||200,r=e.error||.005,i=e.rate||[.03,.02],o=!1!==e.log&&(e.log||10),a=e.cost||this.cost||t.cost.MSE,s=function(t,e){for(var n=t+e,r=0,i=[],o=0;o<n;o++)i.push({input:[0,0],output:[0]});for(;r<n-20;){var a=Math.round(20*Math.random());i[r].input[0]=1;for(var s=r;s<=r+a;s++)i[s].input[1]=a/20,i[s].output[0]=.5;r+=a,a=Math.round(20*Math.random());for(var u=r+1;u<=r+a&&u<n;u++)i[u].input[1]=i[r].input[1];r+=a}for(var c=[],l=[],h=0;h<n;h++)(h<t?c:l).push(i[h]);return{train:c,test:l}}(e.trainSamples||7e3,e.trainSamples||1e3);return{train:this.train(s.train,{rate:i,log:o,iterations:n,error:r,cost:a}),test:this.test(s.test)}}}]),t}();a.cost=o,e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Architect=e.Network=e.Trainer=e.Layer=e.Neuron=void 0;var r=n(2);Object.defineProperty(e,"Neuron",{enumerable:!0,get:function(){return u(r).default}});var i=n(0);Object.defineProperty(e,"Layer",{enumerable:!0,get:function(){return u(i).default}});var o=n(3);Object.defineProperty(e,"Trainer",{enumerable:!0,get:function(){return u(o).default}});var a=n(1);Object.defineProperty(e,"Network",{enumerable:!0,get:function(){return u(a).default}});var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(7));function u(t){return t&&t.__esModule?t:{default:t}}e.Architect=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=e.connections=0,o=function(){function t(e,n,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!n)throw new Error("Connection Error: Invalid neurons");this.ID=t.uid(),this.from=e,this.to=n,this.weight=void 0===r?.2*Math.random()-.1:r,this.gain=1,this.gater=null}return r(t,null,[{key:"uid",value:function(){return e.connections=i+=1,i-1}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connections=void 0;var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),a=(r=o)&&r.__esModule?r:{default:r},s=e.connections=0,u=function(){function t(e,n,r,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ID=t.uid(),this.from=e,this.to=n,this.selfconnection=n==e,this.type=r,this.connections={},this.list=[],this.size=0,this.gatedfrom=[],void 0===this.type&&(this.type=e==n?a.default.connectionType.ONE_TO_ONE:a.default.connectionType.ALL_TO_ALL),this.type==a.default.connectionType.ALL_TO_ALL||this.type==a.default.connectionType.ALL_TO_ELSE)for(var o in this.from.list)for(var s in this.to.list){var u=this.from.list[o],c=this.to.list[s];if(this.type!=a.default.connectionType.ALL_TO_ELSE||u!=c){var l=u.project(c,i);this.connections[l.ID]=l,this.size=this.list.push(l)}}else if(this.type==a.default.connectionType.ONE_TO_ONE)for(var h in this.from.list)u=this.from.list[h],c=this.to.list[h],l=u.project(c,i),this.connections[l.ID]=l,this.size=this.list.push(l);e.connectedTo.push(this)}return i(t,null,[{key:"uid",value:function(){return e.connections=s+=1,s-1}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8);Object.defineProperty(e,"Perceptron",{enumerable:!0,get:function(){return s(r).default}});var i=n(9);Object.defineProperty(e,"LSTM",{enumerable:!0,get:function(){return s(i).default}});var o=n(10);Object.defineProperty(e,"Liquid",{enumerable:!0,get:function(){return s(o).default}});var a=n(11);function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Hopfield",{enumerable:!0,get:function(){return s(a).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(1)),i=o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=Array.prototype.slice.call(arguments);if(n.length<3)throw new Error("not enough layers (minimum 3) !!");for(var r=n.shift(),o=n.pop(),u=n,c=new i.default(r),l=[],h=new i.default(o),f=c,p=0;p<u.length;p++){var d=u[p],v=new i.default(d);l.push(v),f.project(v),f=v}return f.project(h),t.set({input:c,hidden:l,output:h}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(1)),i=o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=Array.prototype.slice.call(arguments);if(n.length<3)throw new Error("not enough layers (minimum 3) !!");var r=n.pop(),o={peepholes:i.default.connectionType.ALL_TO_ALL,hiddenToHidden:!1,outputToHidden:!1,outputToGates:!1,inputToOutput:!0};if("number"!=typeof r){var u=n.pop();r.hasOwnProperty("peepholes")&&(o.peepholes=r.peepholes),r.hasOwnProperty("hiddenToHidden")&&(o.hiddenToHidden=r.hiddenToHidden),r.hasOwnProperty("outputToHidden")&&(o.outputToHidden=r.outputToHidden),r.hasOwnProperty("outputToGates")&&(o.outputToGates=r.outputToGates),r.hasOwnProperty("inputToOutput")&&(o.inputToOutput=r.inputToOutput)}else u=r;for(var c=n.shift(),l=n,h=new i.default(c),f=[],p=new i.default(u),d=null,v=0;v<l.length;v++){var y=l[v],g=new i.default(y).set({bias:1}),b=new i.default(y).set({bias:1}),m=new i.default(y),w=new i.default(y).set({bias:1});f.push(g),f.push(b),f.push(m),f.push(w);var _=h.project(m);if(h.project(g),h.project(b),h.project(w),null!=d){var O=d.project(m);d.project(g),d.project(b),d.project(w)}var T=m.project(p),j=m.project(m);o.hiddenToHidden&&m.project(m,i.default.connectionType.ALL_TO_ELSE),o.outputToHidden&&p.project(m),o.outputToGates&&(p.project(g),p.project(w),p.project(b)),m.project(g,o.peepholes),m.project(b,o.peepholes),m.project(w,o.peepholes),g.gate(_,i.default.gateType.INPUT),b.gate(j,i.default.gateType.ONE_TO_ONE),w.gate(T,i.default.gateType.OUTPUT),null!=d&&g.gate(O,i.default.gateType.INPUT),d=m}return o.inputToOutput&&h.project(p),t.set({input:h,hidden:f,output:p}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(1)),i=o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t,n,r,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),u=new i.default(t),c=new i.default(n),l=new i.default(r),h=c.neurons(),f=[],p=0;p<o;p++){var d=Math.random()*h.length|0,v=Math.random()*h.length|0,y=h[d].project(h[v]);f.push(y)}for(var g=0;g<a;g++){var b=Math.random()*h.length|0;y=Math.random()*f.length|0,h[b].gate(f[y])}return u.project(c),c.project(l),s.set({input:u,hidden:[c],output:l}),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(1)),o=s(n(3)),a=s(n(0));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=new a.default(t),i=new a.default(t);return r.project(i,a.default.connectionType.ALL_TO_ALL),n.set({input:r,hidden:[],output:i}),n.trainer=new o.default(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"learn",value:function(t){var e=[];for(var n in t)e.push({input:t[n],output:t[n]});return this.trainer.train(e,{iterations:5e5,error:5e-5,rate:1})}},{key:"feed",value:function(t){var e=this.activate(t);for(var n in t=[],e)t[n]=e[n]>.5?1:0;return t}}]),e}(i.default);e.default=u}])},t.exports=r()}}));